---
title: "GatsbyJSã¨Notionã‚’ä½¿ã£ã¦ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSãƒ–ãƒ­ã‚°ã‚’ä½œã‚‹"
emoji: "ğŸ¦”"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["GatsbyJS", "Notion", "CMS"]
published: false
publication_name: "pytokyo"
---

æœ¬è¨˜äº‹ã§ã¯ã€Notionã‚’ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹CMSã¨ã—ã¦æ´»ç”¨ã—ã€GatsbyJSã§é™çš„ãƒšãƒ¼ã‚¸åŒ–ã—ã¦ãƒ–ãƒ­ã‚°ã‚’æ§‹ç¯‰ãƒ»å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’ç°¡å˜ã«è§£èª¬ã—ã¾ã™ã€‚

## ãªãœGatsbyJS + Notionãªã®ã‹ï¼Ÿ

ã‚‚ã¨ã‚‚ã¨è‡ªèº«ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆï¼ˆ[mkitlab.com](https://mkitlab.com)ï¼‰ã‚’GatsbyJSã§æ§‹ç¯‰ã—ã¦ã„ãŸã“ã¨ãŒä¸€ã¤ã®ç†ç”±ã§ã™ã€‚

ä¸€æ–¹ã§ã€ãƒ–ãƒ­ã‚°ã¯Notionã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦æ›¸ãã€[Super.so](https://super.so/)ã§å…¬é–‹ã—ã¦ã„ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½¿ã†ãŸã‚ã«ã¯æœ‰æ–™ãƒ—ãƒ©ãƒ³ãŒå¿…è¦ã«ãªã‚‹ãŸã‚ã€ãã‚Œãªã‚‰ã°GatsbyJSã‚’åˆ©ç”¨ã—ãŸãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆã«çµ±åˆã—ã¦ã—ã¾ãŠã†ã¨è€ƒãˆãŸã®ãŒä»Šå›ã®ãã£ã‹ã‘ã§ã™ã€‚

ã¾ãŸã€GatsbyJSã‚’ä½¿ã£ã¦é™çš„ãƒšãƒ¼ã‚¸åŒ–ã™ã‚‹ã“ã¨ã§ã€Notion APIã®å®Ÿè¡Œå›æ•°ã‚’è¨˜äº‹å…¬é–‹æ™‚ã®ã¿ã«æŠ‘ãˆã‚‰ã‚Œã‚‹ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚

## ä¸»ãªä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- [gatsby-source-notion-api](https://github.com/orlowdev/gatsby-source-notion-api)ï¼šNotion APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹
- [gatsby-remark-images-remote](https://github.com/icaraps/gatsby-remark-images-remote)ï¼šNotionã®ç”»åƒã‚’é™çš„åŒ–
- [gatsby-remark-link-card](https://github.com/okaryo/gatsby-remark-link-card)ï¼šè¨˜äº‹å†…ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤º

## å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

### Notionã®ã‚«ãƒãƒ¼ç”»åƒã‚’å‡¦ç†ã™ã‚‹

`gatsby-source-notion-api`ã®READMEã§ã¯ã€ãƒ–ãƒ­ã‚°ã®ã‚«ãƒãƒ¼ç”»åƒã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç”»åƒãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§è¨­å®šã™ã‚‹æ–¹å¼ã§ã—ãŸãŒã€Notionè¨˜äº‹ã®ãƒšãƒ¼ã‚¸ã‚«ãƒãƒ¼ã‚’ãã®ã¾ã¾ãƒ–ãƒ­ã‚°ã®ã‚«ãƒãƒ¼ç”»åƒã¨ã—ã¦åˆ©ç”¨ã—ãŸã‹ã£ãŸã®ã§ã€ãã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚

Notionã®ãƒšãƒ¼ã‚¸ã‚«ãƒãƒ¼ã¯å¤–éƒ¨URLï¼ˆç‰¹ã«externalã‚¿ã‚¤ãƒ—ï¼‰ã®å ´åˆã€ãƒªãƒ³ã‚¯åˆ‡ã‚Œã®ãƒªã‚¹ã‚¯ãŒã‚ã‚‹ãŸã‚ã€`gatsby-source-filesystem`ã®`createRemoteFileNode`ã‚’åˆ©ç”¨ã—ã¦ç”»åƒã‚’é™çš„åŒ–ã—ã¾ã™ã€‚

```javascript
// gatsby-node.js
const { createRemoteFileNode } = require('gatsby-source-filesystem');

exports.onCreateNode = async ({ node, actions, store, cache, createNodeId }) => {
  const { createNodeField, createNode } = actions;

  if (node.internal.type === 'Notion' && node.raw.cover) {
    try {
      const coverUrl = node.raw.cover.type === 'external' ? node.raw.cover.external.url : node.raw.cover.file.url;

      const fileNode = await createRemoteFileNode({
        url: coverUrl,
        parentNodeId: node.id,
        store,
        cache,
        createNode,
        createNodeId,
      });

      if (fileNode) {
        await createNodeField({
          node,
          name: 'remoteCoverImage___NODE',
          value: fileNode.id,
        });
      }
    } catch (error) {
      console.error('Error creating remote file node:', error);
    }
  }
};
```

### Notionè¨˜äº‹å†…ã®ç”»åƒURLã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³åˆ‡ã‚Œã‚’é˜²ã

Notionè¨˜äº‹å†…ã®ç”»åƒURLã¯1æ™‚é–“ã§æœ‰åŠ¹æœŸé™ãŒåˆ‡ã‚Œã¾ã™ã€‚ã“ã®ãŸã‚`gatsby-remark-images-remote`ã‚’åˆ©ç”¨ã—ã€ãƒ–ãƒ­ã‚°å…¬é–‹æ™‚ã«ç”»åƒã‚’é™çš„åŒ–ã—ã¦ãŠãã¾ã™ã€‚

```javascript
// gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: 'gatsby-transformer-remark',
      options: {
        plugins: ['gatsby-remark-images-remote'],
      },
    },
  ],
};
```

### å†…éƒ¨ãƒªãƒ³ã‚¯ã‚’ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰åŒ–ã™ã‚‹

è¨˜äº‹å†…ã®ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰å½¢å¼ã§è¡¨ç¤ºã™ã‚‹ã¨ã€è¦–è¦šçš„ã«è¦‹ã‚„ã™ããªã‚Šã¾ã™ã€‚ä»Šå›ã¯[@okaryo/gatsby-remark-link-card](https://github.com/okaryo/gatsby-remark-link-card)ã‚’å°å…¥ã—ã¾ã—ãŸã€‚

```javascript
// gatsby-config.js
module.exports = {
  plugins: [
    {
      resolve: 'gatsby-transformer-remark',
      options: {
        plugins: ['@okaryo/gatsby-remark-link-card'],
      },
    },
  ],
};
```

ã“ã¡ã‚‰ã®è¨˜äº‹ã§é–‹ç™ºçµŒç·¯ãªã©ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ãŒã€Notionã®ãƒšãƒ¼ã‚¸ã§URLã‚’Bookmarkï¼ˆãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ï¼‰å½¢å¼ã«ã™ã‚‹ã¨ã€Markdownã¨ã—ã¦ã¯ç©ºè¡Œã‚’æŒŸã‚“ã ãŸã ã®URLã«ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã¯ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã«ã™ã‚‹ã¨ãã«ãã‚Œã‚’ãã®ã¾ã¾ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰ã«å¤‰æ›ã—ã¦ãã‚Œã‚‹ã®ã§ã®ã§ã™ã”ãåŠ©ã‹ã‚Šã¾ã—ãŸã€‚

https://blog.okaryo.studio/20240102-released-gatsby-remark-link-card/

## Notionã‹ã‚‰ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤

Notionã®æ›´æ–°ã‚’ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦ã€Gatsbyã®å†ãƒ“ãƒ«ãƒ‰ã‚’è‡ªå‹•åŒ–ã™ã‚‹ã¨ã€é‹ç”¨ãŒæ ¼æ®µã«æ¥½ã«ãªã‚Šã¾ã™ã€‚Webhookã‚’è¨­å®šã—ã€CI/CDãƒ„ãƒ¼ãƒ«ï¼ˆCloudflare Pagesã‚„Netlifyãªã©ï¼‰ã§è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã—ã‚‡ã†ã€‚

è©³ã—ãã¯ä»¥ä¸‹ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

https://web-team.winc.ne.jp/posts/notion-webhook/

## ã¾ã¨ã‚

GatsbyJSã¨Notionã‚’æ´»ç”¨ã™ã‚Œã°ã€é«˜é€Ÿã‹ã¤é‹ç”¨æ€§ã®é«˜ã„ãƒ–ãƒ­ã‚°ã‚’ç°¡å˜ã«æ§‹ç¯‰ã§ãã¾ã™ã€‚
å®Ÿéš›ã«é‹ç”¨ã—ã¦ã„ã‚‹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã¯ä¸‹è¨˜ã‹ã‚‰ã”è¦§ã„ãŸã ã‘ã¾ã™ã€‚

https://mkitlab.com

